<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    
    <title>springMVC基础实战演练 | 小蝌蚪(smallCoder)</title>
    
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    
        <meta name="keywords" content="后端,java,springmvc" />
    
    <meta name="description" content="1. SpringMVC架构1.1 Spring web mvc介绍Spring web mvc和Struts2都属于表现层的框架,它是Spring框架的一部分,我们可以从Spring的整体结构中看得出来：  1.2 Web MVC1.2.1 架构图mvc设计模式在b/s系统下应用： 1.2.2 架构流程 用户发起request请求至控制器(Controller)，控制接收用户请求的数据，委托给模">
<meta name="keywords" content="后端,java,springmvc">
<meta property="og:type" content="article">
<meta property="og:title" content="springMVC基础实战演练">
<meta property="og:url" content="http://coder0007.com/2017/12/14/springMVC基础学习/index.html">
<meta property="og:site_name" content="小蝌蚪(smallCoder)">
<meta property="og:description" content="1. SpringMVC架构1.1 Spring web mvc介绍Spring web mvc和Struts2都属于表现层的框架,它是Spring框架的一部分,我们可以从Spring的整体结构中看得出来：  1.2 Web MVC1.2.1 架构图mvc设计模式在b/s系统下应用： 1.2.2 架构流程 用户发起request请求至控制器(Controller)，控制接收用户请求的数据，委托给模">
<meta property="og:locale" content="zh-CN">
<meta property="og:image" content="https://note.youdao.com/yws/api/personal/file/660681A60D7E435191CFC6E6654F2A08?method=download&amp;shareKey=ac7d3a198f2ea12c9e5a760304123099">
<meta property="og:updated_time" content="2018-01-09T09:57:42.762Z">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="springMVC基础实战演练">
<meta name="twitter:description" content="1. SpringMVC架构1.1 Spring web mvc介绍Spring web mvc和Struts2都属于表现层的框架,它是Spring框架的一部分,我们可以从Spring的整体结构中看得出来：  1.2 Web MVC1.2.1 架构图mvc设计模式在b/s系统下应用： 1.2.2 架构流程 用户发起request请求至控制器(Controller)，控制接收用户请求的数据，委托给模">
<meta name="twitter:image" content="https://note.youdao.com/yws/api/personal/file/660681A60D7E435191CFC6E6654F2A08?method=download&amp;shareKey=ac7d3a198f2ea12c9e5a760304123099">
    

    

    

    <link rel="stylesheet" href="/libs/font-awesome/css/font-awesome.min.css">
    <link rel="stylesheet" href="/libs/titillium-web/styles.css">
    <link rel="stylesheet" href="/libs/source-code-pro/styles.css">

    <link rel="stylesheet" href="/css/style.css">

    <script src="/libs/jquery/2.0.3/jquery.min.js"></script>
    
    
        <link rel="stylesheet" href="/libs/lightgallery/css/lightgallery.min.css">
    
    
        <link rel="stylesheet" href="/libs/justified-gallery/justifiedGallery.min.css">
    
    
    


</head>

<body>
    <div id="wrap">
        <header id="header">
    <div id="header-outer" class="outer">
        <div class="container">
            <div class="container-inner">
                <div id="header-title">
                    <h1 class="logo-wrap">
                        <a href="/" class="logo"></a>
                    </h1>
                    
                        <h2 class="subtitle-wrap">
                            <p class="subtitle">我只是大自然的搬运工 务实 创新</p>
                        </h2>
                    
                </div>
                <div id="header-inner" class="nav-container">
                    <a id="main-nav-toggle" class="nav-icon fa fa-bars"></a>
                    <div class="nav-container-inner">
                        <ul id="main-nav">
                            
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/">主页</a>
                                </li>
                            
                                        <ul class="main-nav-list"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/技术/">技术</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/技术/前端/">前端</a></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/技术/后端/">后端</a></li></ul></li><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/简历/">简历</a><ul class="main-nav-list-child"><li class="main-nav-list-item"><a class="main-nav-list-link" href="/categories/简历/我的简历/">我的简历</a></li></ul></li></ul>
                                    
                                <li class="main-nav-list-item" >
                                    <a class="main-nav-list-link" href="/about/index.html">关于</a>
                                </li>
                            
                        </ul>
                        <nav id="sub-nav">
                            <div id="search-form-wrap">

    <form class="search-form">
        <input type="text" class="ins-search-input search-form-input" placeholder="搜索" />
        <button type="submit" class="search-form-submit"></button>
    </form>
    <div class="ins-search">
    <div class="ins-search-mask"></div>
    <div class="ins-search-container">
        <div class="ins-input-wrapper">
            <input type="text" class="ins-search-input" placeholder="想要查找什么..." />
            <span class="ins-close ins-selectable"><i class="fa fa-times-circle"></i></span>
        </div>
        <div class="ins-section-wrapper">
            <div class="ins-section-container"></div>
        </div>
    </div>
</div>
<script>
(function (window) {
    var INSIGHT_CONFIG = {
        TRANSLATION: {
            POSTS: '文章',
            PAGES: '页面',
            CATEGORIES: '分类',
            TAGS: '标签',
            UNTITLED: '(未命名)',
        },
        ROOT_URL: '/',
        CONTENT_URL: '/content.json',
    };
    window.INSIGHT_CONFIG = INSIGHT_CONFIG;
})(window);
</script>
<script src="/js/insight.js"></script>

</div>
                        </nav>
                    </div>
                </div>
            </div>
        </div>
    </div>
</header>
        <div class="container">
            <div class="main-body container-inner">
                <div class="main-body-inner">
                    <section id="main">
                        <div class="main-body-header">
    <h1 class="header">
    
    <a class="page-title-link" href="/categories/技术/">技术</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/技术/后端/">后端</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/技术/后端/java/">java</a><i class="icon fa fa-angle-right"></i><a class="page-title-link" href="/categories/技术/后端/java/springmvc/">springmvc</a>
    </h1>
</div>
                        <div class="main-body-content">
                            <article id="post-springMVC基础学习" class="article article-single article-type-post" itemscope itemprop="blogPost">
    <div class="article-inner">
        
            <header class="article-header">
                
    
        <h1 class="article-title" itemprop="name">
        springMVC基础实战演练
        </h1>
    

            </header>
        
        
            <div class="article-meta">
                
    <div class="article-date">
        <a href="/2017/12/14/springMVC基础学习/" class="article-date">
            <time datetime="2017-12-14T08:02:13.000Z" itemprop="datePublished">2017-12-14</time>
        </a>
    </div>

                
    <div class="article-tag">
        <i class="fa fa-tag"></i>
        <a class="tag-link" href="/tags/java/">java</a>, <a class="tag-link" href="/tags/springmvc/">springmvc</a>, <a class="tag-link" href="/tags/后端/">后端</a>
    </div>

            </div>
        
        
        <div class="article-entry" itemprop="articleBody">
            <h2 id="1-SpringMVC架构"><a href="#1-SpringMVC架构" class="headerlink" title="1. SpringMVC架构"></a>1. SpringMVC架构</h2><h3 id="1-1-Spring-web-mvc介绍"><a href="#1-1-Spring-web-mvc介绍" class="headerlink" title="1.1 Spring web mvc介绍"></a>1.1 Spring web mvc介绍</h3><p>Spring web mvc和Struts2都属于表现层的框架,它是Spring框架的一部分,我们可以从Spring的整体结构中看得出来：</p>
<p><img src="https://note.youdao.com/yws/api/personal/file/660681A60D7E435191CFC6E6654F2A08?method=download&amp;shareKey=ac7d3a198f2ea12c9e5a760304123099" alt="spring结构"></p>
<h3 id="1-2-Web-MVC"><a href="#1-2-Web-MVC" class="headerlink" title="1.2 Web MVC"></a>1.2 Web MVC</h3><h4 id="1-2-1-架构图"><a href="#1-2-1-架构图" class="headerlink" title="1.2.1 架构图"></a>1.2.1 架构图</h4><p>mvc设计模式在b/s系统下应用：<br><img src="web_mvc.png" alt=""></p>
<h4 id="1-2-2-架构流程"><a href="#1-2-2-架构流程" class="headerlink" title="1.2.2 架构流程"></a>1.2.2 架构流程</h4><ul>
<li>用户发起request请求至控制器(Controller)，控制接收用户请求的数据，委托给模型进行处理。</li>
<li>控制器通过模型(Model)处理数据并得到处理结果，模型通常是指业务逻辑。</li>
<li>模型处理结果返回给控制器。</li>
<li>控制器将模型数据在视图(View)中展示，web中模型无法将数据直接在视图上显示，需要通过控制器完成。如果在C/S应用中模型是可以将数据在视图中展示的。</li>
<li>控制器将视图response响应给用户–通过视图展示给用户要的数据或处理结果。</li>
</ul>
<h3 id="1-3-Spring-web-mvc架构"><a href="#1-3-Spring-web-mvc架构" class="headerlink" title="1.3 Spring web mvc架构"></a>1.3 Spring web mvc架构</h3><h4 id="1-3-1-架构图"><a href="#1-3-1-架构图" class="headerlink" title="1.3.1 架构图"></a>1.3.1 架构图</h4><p><img src="spring_web_mvc.png" alt="springmvc架构图"></p>
<h4 id="1-3-2-架构流程"><a href="#1-3-2-架构流程" class="headerlink" title="1.3.2 架构流程"></a>1.3.2 架构流程</h4><ul>
<li>用户发送请求至前端控制器(DispatcherServlet)。</li>
<li>前端控制器(DispatcherServlet)收到请求调用处理器映射器(HandlerMapping)–处理器映射器根据请求url找到具体的处理器，生成处理器对象及处理器拦截器(如果有则生成)一并返回给DispatcherServlet。</li>
<li>前端控制器(DispatcherServlet)通过处理器适配器(HandlerAdapter)调用处理器–执行处理器(Controller，也叫后端控制器)，Controller执行完成返回ModelAndView对象；HandlerAdapter将controller执行结果ModelAndView返回给DispatcherServlet。</li>
<li>DispatcherServlet将ModelAndView传给ViewReslover视图解析器–ViewReslover解析后返回具体View。</li>
<li>DispatcherServlet对View进行渲染视图（即将模型数据填充至视图中）。</li>
<li>DispatcherServlet响应用户</li>
</ul>
<h4 id="1-3-3-组件说明"><a href="#1-3-3-组件说明" class="headerlink" title="1.3.3 组件说明"></a>1.3.3 组件说明</h4><p><strong>DispatcherServlet：前端控制器</strong><br>用户请求到达前端控制器，它就相当于mvc模式中的c，dispatcherServlet是整个流程控制的中心，由它调用其它组件处理用户的请求，dispatcherServlet的存在降低了组件之间的耦合性。<br><strong>HandlerMapping：处理器映射器</strong><br>HandlerMapping负责根据用户请求找到Handler即处理器，springmvc提供了不同的映射器实现不同的映射方式，例如：配置文件方式，实现接口方式，注解方式等。<br><strong>Handler：处理器</strong><br>Handler 是继DispatcherServlet前端控制器的后端控制器，在DispatcherServlet的控制下Handler对具体的用户请求进行处理。由于Handler涉及到具体的用户业务请求，所以一般情况需要程序员根据业务需求开发Handler。<br><strong>HandlAdapter：处理器适配器</strong><br>通过HandlerAdapter对处理器进行执行，这是适配器模式的应用，通过扩展适配器可以对更多类型的处理器进行执行。<br><strong>View Resolver：视图解析器</strong><br>View Resolver负责将处理结果生成View视图，View Resolver首先根据逻辑视图名解析成物理视图名即具体的页面地址，再生成View视图对象，最后对View进行渲染将处理结果通过页面展示给用户。 springmvc框架提供了很多的View视图类型，包括：jstlView、freemarkerView、pdfView等。一般情况下需要通过页面标签或页面模版技术将模型数据通过页面展示给用户，需要由程序员根据业务需求开发具体的页面。</p>
<h2 id="2-商品订单业务说明"><a href="#2-商品订单业务说明" class="headerlink" title="2. 商品订单业务说明"></a>2. 商品订单业务说明</h2><p>本教程在通过商品订单业务学习使用springmvc进行功能开发。</p>
<h3 id="2-1-业务流程"><a href="#2-1-业务流程" class="headerlink" title="2.1 业务流程"></a>2.1 业务流程</h3><ul>
<li>管理员维护商品信息</li>
<li>用户挑选商品，购买，创建订单</li>
</ul>
<h3 id="2-2-数据库环境"><a href="#2-2-数据库环境" class="headerlink" title="2.2 数据库环境"></a>2.2 数据库环境</h3><p>获取sql文件请点击<a href="https://pan.baidu.com/s/1i5GOr57" target="_blank" rel="noopener">百度云</a>  ，密码：dwlw<br>先导入sql_table.sql（表结构），再导入 sql_data.sql（表数据）<br><img src="数据库sql文件.png" style="float:left;"></p>
<div style="clear:both"></div><br>如图：<br><img src="database_mybatis.png" style="float:left;"><br><div style="clear:both"></div>

<h3 id="2-3-商品订单数据模型"><a href="#2-3-商品订单数据模型" class="headerlink" title="2.3 商品订单数据模型"></a>2.3 商品订单数据模型</h3><p><img src="商品订单数据模型.png" alt="商品订单数据模型"></p>
<h2 id="3-SpringMVC入门"><a href="#3-SpringMVC入门" class="headerlink" title="3. SpringMVC入门"></a>3. SpringMVC入门</h2><h3 id="3-1-需求"><a href="#3-1-需求" class="headerlink" title="3.1 需求"></a>3.1 需求</h3><p>实现商品查询列表功能。</p>
<h3 id="3-2-开发环境准备"><a href="#3-2-开发环境准备" class="headerlink" title="3.2 开发环境准备"></a>3.2 开发环境准备</h3><p>本教程使用myEclipse+tomcat7开发</p>
<h3 id="3-3-第一步-建立一个Web项目"><a href="#3-3-第一步-建立一个Web项目" class="headerlink" title="3.3 第一步:建立一个Web项目"></a>3.3 第一步:建立一个Web项目</h3><p>在myEclipse下创建动态web工程springmvc_first。<br>步骤：File ==&gt; New ==&gt; Web Project<br>如图：<br><img src="新建项目.png" alt="新建项目"><br><small style="color:red">注意：选择java EE version选择javaEE5-web2.5,选择javaEE6或javaEE7生成的项目在WEB-INF目录下面找不到web.xml。</small></p>
<h3 id="3-4-第二步-导入spring3-2-0的jar包"><a href="#3-4-第二步-导入spring3-2-0的jar包" class="headerlink" title="3.4 第二步:导入spring3.2.0的jar包"></a>3.4 第二步:导入spring3.2.0的jar包</h3><p>需要spring3.2所有jar（一定包括spring-webmvc-3.2.0.RELEASE.jar）<br>获取相关jar包请点击<a href="https://pan.baidu.com/s/1jIOnRuQ" target="_blank" rel="noopener">百度云</a>，密码：p7qg<br>把上面所有的jar包放入WebRoot/WEB-INF/lib目录中<br><img src="spring3_2_0_jar.png" style="float:left"></p>
<p><div style="clear:both"></div></p>
<h3 id="3-5-第三步：前端控制器配置"><a href="#3-5-第三步：前端控制器配置" class="headerlink" title="3.5 第三步：前端控制器配置"></a>3.5 第三步：前端控制器配置</h3><p>在WEB-INF目录下的web.xml写入</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>*.action<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><b style="color:red;">[说明]</b><br> <strong>load-on-startup</strong>：表示servlet随服务启动；<br> <strong>url-pattern：*.action</strong>的请交给DispatcherServlet处理。<br> <strong>contextConfigLocation</strong>：指定springmvc配置的加载位置，如果不指定则默认加载WEB-INF/[DispatcherServlet 的Servlet 名字]-servlet.xml。</p>
<h4 id="3-5-1-Servlet拦截方式"><a href="#3-5-1-Servlet拦截方式" class="headerlink" title="3.5.1 Servlet拦截方式"></a>3.5.1 Servlet拦截方式</h4><ul>
<li>拦截固定后缀的url，比如设置为 <em>.do、</em>.action， 例如：/user/add.action ,此方法最简单，不会导致静态资源（jpg,js,css）被拦截。</li>
<li>拦截所有，设置为/，例如：/user/add  /user/add.action,此方法可以实现REST风格的url，很多互联网类型的应用使用这种方式；但是此方法会导致静态文件（jpg,js,css）被拦截后不能正常显示。需要特殊处理。</li>
<li><p>拦截所有，设置为/*，此设置方法错误，因为请求到Action，当action转到jsp时再次被拦截，提示不能根据jsp路径mapping成功。</p>
<h3 id="3-6-第四步：springmvc配置文件"><a href="#3-6-第四步：springmvc配置文件" class="headerlink" title="3.6 第四步：springmvc配置文件"></a>3.6 第四步：springmvc配置文件</h3><p>Springmvc默认加载WEB-INF/[前端控制器的名字]-servlet.xml，也可以在前端控制器定义处指定加载的配置文件，如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:springmvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>如上代码，通过contextConfigLocation加载classpath下的springmvc.xml配置文件。<br>需要新建一个Source Folder：config<br>步骤：鼠标右键springmvc_first ==&gt; New ==&gt; Source Folder 如下图：<br><img src="新建sourceFolder.png" style="float:left"><br><div style="clear:both"></div><br>在config文件里面创建springmvc.xml</p>
<h3 id="3-7-第五步：配置处理器适配器"><a href="#3-7-第五步：配置处理器适配器" class="headerlink" title="3.7 第五步：配置处理器适配器"></a>3.7 第五步：配置处理器适配器</h3><p>在springmvc.xml文件配置如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">beans</span> <span class="attr">xmlns</span>=<span class="string">"http://www.springframework.org/schema/beans"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:xsi</span>=<span class="string">"http://www.w3.org/2001/XMLSchema-instance"</span> <span class="attr">xmlns:mvc</span>=<span class="string">"http://www.springframework.org/schema/mvc"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:context</span>=<span class="string">"http://www.springframework.org/schema/context"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xmlns:aop</span>=<span class="string">"http://www.springframework.org/schema/aop"</span> <span class="attr">xmlns:tx</span>=<span class="string">"http://www.springframework.org/schema/tx"</span></span></span><br><span class="line"><span class="tag">	<span class="attr">xsi:schemaLocation</span>=<span class="string">"http://www.springframework.org/schema/beans </span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/beans/spring-beans-3.2.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/mvc </span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/mvc/spring-mvc-3.2.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context </span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/context/spring-context-3.2.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop </span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/aop/spring-aop-3.2.xsd </span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/tx </span></span></span><br><span class="line"><span class="tag"><span class="string">		http://www.springframework.org/schema/tx/spring-tx-3.2.xsd "</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"</span>/&gt;</span> </span><br><span class="line"><span class="tag">&lt;/<span class="name">beans</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p><strong>[说明]</strong><br>SimpleControllerHandlerAdapter：即简单控制器处理适配器，所有实现了org.springframework.web.servlet.mvc.Controller 接口的Bean作为Springmvc的后端控制器。</p>
<h3 id="3-8-第六步：处理器开发"><a href="#3-8-第六步：处理器开发" class="headerlink" title="3.8 第六步：处理器开发"></a>3.8 第六步：处理器开发</h3><p>在项目的src目录下新建两个Package：cn.huoyuwang.ssm.controller和cn.huoyuwang.ssm.po<br>包说明：<br>cn：域名<br>huoyuwang：公司名或项目名<br>ssm：项目框架<br>controller：写得所有处理器放在里面<br>po：实体类（po里面的实体类文件由mybatis逆向工程生成，生成的步骤请参考我的另一篇博客：<a href="http://coder0007.com/2017/12/15/mybatis%E9%80%86%E5%90%91%E5%B7%A5%E7%A8%8B%E7%94%9F%E6%88%90%E6%BA%90%E7%A0%81/">mybatis逆向工程生成源码</a>）<br>在controller目录下新建一个class文件：itemList</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">itemList</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(HttpServletRequest request,HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		<span class="comment">//商品列表</span></span><br><span class="line">		List&lt;Items&gt; itemsList = <span class="keyword">new</span> ArrayList&lt;Items&gt;();</span><br><span class="line">		Items items_1 = <span class="keyword">new</span> Items();</span><br><span class="line">		items_1.setName(<span class="string">"联想笔记本"</span>);</span><br><span class="line">		items_1.setPrice(<span class="number">6000f</span>);</span><br><span class="line">		items_1.setDetail(<span class="string">"ThinkPad T430 联想笔记本电脑！"</span>);</span><br><span class="line">		Items items_2 = <span class="keyword">new</span> Items();</span><br><span class="line">		items_2.setName(<span class="string">"苹果手机"</span>);</span><br><span class="line">		items_2.setPrice(<span class="number">5000f</span>);</span><br><span class="line">		items_2.setDetail(<span class="string">"iphone6苹果手机！"</span>);</span><br><span class="line">		itemsList.add(items_1);</span><br><span class="line">		itemsList.add(items_2);</span><br><span class="line">		<span class="comment">//创建modelAndView准备填充数据、设置视图</span></span><br><span class="line">		ModelAndView modelAndView = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">		<span class="comment">//填充数据</span></span><br><span class="line">		modelAndView.addObject(<span class="string">"itemsList"</span>, itemsList);</span><br><span class="line">		<span class="comment">//视图</span></span><br><span class="line">		modelAndView.setViewName(<span class="string">"order/itemsList"</span>);</span><br><span class="line">		<span class="keyword">return</span> modelAndView;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
</li>
</ul>
<p>org.springframework.web.servlet.mvc.Controller：处理器必须实现Controller 接口。<br>ModelAndView：包含了模型数据及逻辑视图名</p>
<h3 id="3-9第七步：配置处理器映射器"><a href="#3-9第七步：配置处理器映射器" class="headerlink" title="3.9第七步：配置处理器映射器"></a>3.9第七步：配置处理器映射器</h3><p>在springmvc.xml文件配置如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 处理器映射器 --&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 根据bean的name进行查找Handler 将action的url配置在bean的name中 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"</span> /&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>BeanNameUrlHandlerMapping：表示将定义的Bean名字作为请求的url，需要将编写的controller在spring容器中进行配置，且指定bean的name为请求的url，且必须以.action结尾。</p>
<h3 id="3-10第八步：处理器配置"><a href="#3-10第八步：处理器配置" class="headerlink" title="3.10第八步：处理器配置"></a>3.10第八步：处理器配置</h3><p>在springmvc.xml文件配置如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- controller配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"/items.action"</span> <span class="attr">id</span>=<span class="string">"itemList"</span> <span class="attr">class</span>=<span class="string">"cn.huoyuwang.ssm.controller.itemList"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>name=”/items.action”：前边配置的处理器映射器为BeanNameUrlHandlerMapping，如果请求的URL 为“上下文/items.action”将会成功映射到itemList控制器。</p>
<h3 id="3-11第九步：配置视图解析器"><a href="#3-11第九步：配置视图解析器" class="headerlink" title="3.11第九步：配置视图解析器"></a>3.11第九步：配置视图解析器</h3><p>在springmvc.xml文件配置如下：<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- ViewResolver --&gt;</span><br><span class="line">&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;&gt;</span><br><span class="line">&lt;property name=&quot;viewClass&quot; value=&quot;org.springframework.web.servlet.view.JstlView&quot;/&gt;</span><br><span class="line">&lt;property name=&quot;prefix&quot; value=&quot;/WEB-INF/jsp/&quot;/&gt;</span><br><span class="line">&lt;property name=&quot;suffix&quot; value=&quot;.jsp&quot;/&gt;</span><br><span class="line">&lt;/bean&gt;</span><br></pre></td></tr></table></figure></p>
<p>InternalResourceViewResolver：支持JSP视图解析<br>viewClass：JstlView表示JSP模板页面需要使用JSTL标签库，所以classpath中必须包含jstl的相关jar 包；<br>prefix 和suffix：查找视图页面的前缀和后缀，最终视图的址为：<br>前缀+逻辑视图名+后缀，逻辑视图名需要在controller中返回ModelAndView指定，比如逻辑视图名为hello，则最终返回的jsp视图地址 “WEB-INF/jsp/hello.jsp”</p>
<h3 id="3-12第十步：视图开发"><a href="#3-12第十步：视图开发" class="headerlink" title="3.12第十步：视图开发"></a>3.12第十步：视图开发</h3><p>创建/WEB-INF/jsp/itemsList.jsp视图页面：<br><figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">&lt;%@ page language=<span class="string">"java"</span> contentType=<span class="string">"text/html; charset=UTF-8"</span></span><br><span class="line">    pageEncoding=<span class="string">"UTF-8"</span>%&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/core"</span> prefix=<span class="string">"c"</span> %&gt;</span><br><span class="line">&lt;%@ taglib uri=<span class="string">"http://java.sun.com/jsp/jstl/fmt"</span>  prefix=<span class="string">"fmt"</span>%&gt;</span><br><span class="line">&lt;!DOCTYPE html PUBLIC <span class="string">"-//W3C//DTD HTML 4.01 Transitional//EN"</span> <span class="string">"http://www.w3.org/TR/html4/loose.dtd"</span>&gt;</span><br><span class="line">&lt;html&gt;</span><br><span class="line">&lt;head&gt;</span><br><span class="line">&lt;meta http-equiv=<span class="string">"Content-Type"</span> content=<span class="string">"text/html; charset=UTF-8"</span>&gt;</span><br><span class="line">&lt;title&gt;查询商品列表&lt;/title&gt;</span><br><span class="line">&lt;/head&gt;</span><br><span class="line">&lt;body&gt;</span><br><span class="line">商品列表：</span><br><span class="line">&lt;table width=<span class="string">"100%"</span> border=<span class="number">1</span>&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">	&lt;td&gt;商品名称&lt;/td&gt;</span><br><span class="line">	&lt;td&gt;商品价格&lt;/td&gt;</span><br><span class="line">	&lt;td&gt;商品描述&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;c:forEach items=<span class="string">"$&#123;itemsList &#125;"</span> var=<span class="string">"item"</span>&gt;</span><br><span class="line">&lt;tr&gt;</span><br><span class="line">	&lt;td&gt;$&#123;item.name &#125;&lt;/td&gt;</span><br><span class="line">	&lt;td&gt;$&#123;item.price &#125;&lt;/td&gt;</span><br><span class="line">	&lt;td&gt;$&#123;item.detail &#125;&lt;/td&gt;</span><br><span class="line">&lt;/tr&gt;</span><br><span class="line">&lt;/c:forEach&gt;</span><br><span class="line"></span><br><span class="line">&lt;/table&gt;</span><br><span class="line">&lt;/body&gt;</span><br><span class="line">&lt;/html&gt;</span><br></pre></td></tr></table></figure></p>
<h3 id="3-13-第十一步：部署在tomcat测试"><a href="#3-13-第十一步：部署在tomcat测试" class="headerlink" title="3.13 第十一步：部署在tomcat测试"></a>3.13 第十一步：部署在tomcat测试</h3><p>通过请求：<a href="http://localhost:8080/springmvc_first/items.action，如果页面输出商品列表就表明我们成功了！如图：" target="_blank" rel="noopener">http://localhost:8080/springmvc_first/items.action，如果页面输出商品列表就表明我们成功了！如图：</a><br><img src="20180109150659.png" alt=""></p>
<p>到这里商品查询列表的功能就实现了！但是你发现了什么问题呢？<br>一是处理器映射器和处理器适配器只有这一种配置么，答案是否定的。<br>二是我们的模型数据是硬编码，没有从数据库中得到。<br>带着这些问题继续下面的学习</p>
<h3 id="3-14-DispatcherServlet前端控制器"><a href="#3-14-DispatcherServlet前端控制器" class="headerlink" title="3.14 DispatcherServlet前端控制器"></a>3.14 DispatcherServlet前端控制器</h3><p>DispathcerServlet作为springmvc的中央调度器存在，DispatcherServlet创建时会默认从spring-webmvc-xxx.jar包中的DispatcherServlet.properties文件加载springmvc所用的各种组件，如果在springmvc.xml中配置了组件则以springmvc.xml中配置的为准，DispatcherServlet的存在降低了springmvc各组件之间的耦合度。<br><img src="20180109153401.png" alt=""></p>
<h3 id="3-15-非注解HandlerMapping处理器映射器"><a href="#3-15-非注解HandlerMapping处理器映射器" class="headerlink" title="3.15 非注解HandlerMapping处理器映射器"></a>3.15 非注解HandlerMapping处理器映射器</h3><p>HandlerMapping 负责根据request请求找到对应的Handler处理器及Interceptor拦截器，将它们封装在HandlerExecutionChain 对象中给前端控制器返回。下面介绍两种非注解的处理器映射器</p>
<ul>
<li><p>BeanNameUrlHandlerMapping<br>BeanNameUrl处理器映射器，根据请求的url与spring容器中定义的bean的name进行匹配，从而从spring容器中找到bean实例。这种非注解的处理器映射器正是上面配置用到的</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">!—beanName</span> <span class="attr">Url</span>映射器 <span class="attr">--</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
</li>
<li><p>SimpleUrlHandlerMapping<br>simpleUrlHandlerMapping是BeanNameUrlHandlerMapping的增强版本，它可以将url和处理器bean的id进行统一映射配置。</p>
</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 简单url映射器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mappings"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"/items1.action"</span>&gt;</span>controller的bean id<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"/items2.action"</span>&gt;</span>controller的bean id<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure>
<p>注意上面这两种映射器都要配合下面的代码，对于beanName Url映射器的controller配置不必要id，对于简单url映射器的controller配置不必要name，简单url映射配置里面的key值相当于bean 的name。<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- controller配置 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">name</span>=<span class="string">"/items.action"</span> <span class="attr">id</span>=<span class="string">"itemList"</span> <span class="attr">class</span>=<span class="string">"cn.huoyuwang.ssm.controller.itemList"</span>/&gt;</span></span><br></pre></td></tr></table></figure></p>
<p><strong>测试</strong><br>前面我们已经对beanName Url映射器做了测试，这里就不再测试。下面对简单的url映射器进行测试<br>当然上面两种映射器是可以共存的，所以在springmvc.xml中配置如下：<br><figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!--controller--&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">id</span>=<span class="string">"itemList"</span> <span class="attr">class</span>=<span class="string">"cn.huoyuwang.ssm.controller.itemList"</span> /&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- 简单url映射器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.handler.SimpleUrlHandlerMapping"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"mappings"</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">props</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">prop</span> <span class="attr">key</span>=<span class="string">"/items1.action"</span>&gt;</span>itemsList<span class="tag">&lt;/<span class="name">prop</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">props</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br></pre></td></tr></table></figure></p>
<p>如图所示：<br><img src="20180109160858.png" alt=""><br>通过请求：<a href="http://localhost:8080/springmvc_first/items1.action" target="_blank" rel="noopener">http://localhost:8080/springmvc_first/items1.action</a><br>如果页面输出商品列表就表明我们成功了！</p>
<h3 id="3-16-非注解HandlerAdapter处理器适配器"><a href="#3-16-非注解HandlerAdapter处理器适配器" class="headerlink" title="3.16 非注解HandlerAdapter处理器适配器"></a>3.16 非注解HandlerAdapter处理器适配器</h3><p>HandlerAdapter会根据适配器接口对后端控制器进行包装（适配），包装后即可对处理器进行执行，通过扩展处理器适配器可以执行多种类型的处理器，这里使用了适配器设计模式。下面介绍两种非注解的处理器适配器</p>
<ul>
<li>SimpleControllerHandlerAdapter<br>SimpleControllerHandlerAdapter简单控制器处理器适配器，所有实现了org.springframework.web.servlet.mvc.Controller 接口的Bean通过此适配器进行适配、执行。<br>上面的介绍已经对它进行了测试<br>适配器配置如下：</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter"</span> /&gt;</span></span><br></pre></td></tr></table></figure>
<ul>
<li>HttpRequestHandlerAdapter<br>HttpRequestHandlerAdapter，http请求处理器适配器，所有实现了org.springframework.web.HttpRequestHandler 接口的Bean通过此适配器进行适配、执行。<br>上面两种处理器适配器也可以共存。</li>
</ul>
<p>适配器配置如下：</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.mvc.HttpRequestHandlerAdapter"</span>/&gt;</span></span><br></pre></td></tr></table></figure>
<p>在controller文件下面新建itemList2.java<br>Controller实现如下：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">itemList2</span> <span class="keyword">implements</span> <span class="title">HttpRequestHandler</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">			HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		<span class="comment">// 商品列表</span></span><br><span class="line">		List&lt;Items&gt; itemsList = <span class="keyword">new</span> ArrayList&lt;Items&gt;();</span><br><span class="line"></span><br><span class="line">		Items items_1 = <span class="keyword">new</span> Items();</span><br><span class="line">		items_1.setName(<span class="string">"联想笔记本"</span>);</span><br><span class="line">		items_1.setPrice(<span class="number">6000f</span>);</span><br><span class="line">		items_1.setDetail(<span class="string">"ThinkPad T430 联想笔记本电脑！"</span>);</span><br><span class="line"></span><br><span class="line">		Items items_2 = <span class="keyword">new</span> Items();</span><br><span class="line">		items_2.setName(<span class="string">"苹果手机"</span>);</span><br><span class="line">		items_2.setPrice(<span class="number">5000f</span>);</span><br><span class="line">		items_2.setDetail(<span class="string">"iphone5  苹果手机！"</span>);</span><br><span class="line"></span><br><span class="line">		itemsList.add(items_1);</span><br><span class="line">		itemsList.add(items_2);</span><br><span class="line">		<span class="comment">// 填充数据</span></span><br><span class="line">		request.setAttribute(<span class="string">"itemsList"</span>, itemsList);	</span><br><span class="line">		<span class="comment">// 视图</span></span><br><span class="line">		request.getRequestDispatcher(<span class="string">"/WEB-INF/jsp/order/itemsList.jsp"</span>).forward(request, response);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>从上边可以看出此适配器器的handleRequest方法没有返回ModelAndView，可通过response修改定义响应内容，比如返回json数据<br>利用返回的json数据我们可以开发接口。<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">response.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">response.setContentType(<span class="string">"application/json;charset=utf-8"</span>);</span><br><span class="line">response.getWriter().write(<span class="string">"json串"</span>);</span><br></pre></td></tr></table></figure></p>
<p><strong>测试1</strong><br>我们在springmvc.xml中加入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--controller配置--&gt;</span><br><span class="line">&lt;bean id=&quot;itemList2&quot; class=&quot;cn.huoyuwang.ssm.controller.itemList2&quot;/&gt;</span><br><span class="line">&lt;!--简单url映射器配置--&gt;	</span><br><span class="line">&lt;prop key=&quot;/items2.action&quot;&gt;itemList2&lt;/prop&gt;</span><br></pre></td></tr></table></figure></p>
<p>如图所示：<br><img src="20180109170539.png" alt=""><br>通过请求：<a href="http://localhost:8080/springmvc_first/items2.action" target="_blank" rel="noopener">http://localhost:8080/springmvc_first/items2.action</a><br>如果页面输出商品列表就表明我们配置成功了！</p>
<p><strong>测试2</strong><br>目的：我们要返回字符串<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">你好，我是字符串!</span><br></pre></td></tr></table></figure></p>
<p>我们在springmvc.xml中加入<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;!--controller配置--&gt;</span><br><span class="line">&lt;bean id=&quot;itemList3&quot; class=&quot;cn.huoyuwang.ssm.controller.itemList3&quot;/&gt;</span><br><span class="line">&lt;!--简单url映射器配置--&gt;	</span><br><span class="line">&lt;prop key=&quot;/items3.action&quot;&gt;itemList3&lt;/prop&gt;</span><br></pre></td></tr></table></figure></p>
<p>在controller中新建class文件：itemList3.java<br><figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">itemList3</span> <span class="keyword">implements</span> <span class="title">HttpRequestHandler</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">handleRequest</span><span class="params">(HttpServletRequest request,</span></span></span><br><span class="line"><span class="function"><span class="params">			HttpServletResponse response)</span> <span class="keyword">throws</span> ServletException, IOException </span>&#123;</span><br><span class="line">		response.setCharacterEncoding(<span class="string">"utf-8"</span>);</span><br><span class="line">		response.setContentType(<span class="string">"application/json;charset=utf-8"</span>);</span><br><span class="line">		response.getWriter().write(<span class="string">"你好，我是字符串"</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure></p>
<p>通过请求：<a href="http://localhost:8080/springmvc_first/items3.action" target="_blank" rel="noopener">http://localhost:8080/springmvc_first/items3.action</a><br>如果页面输出商品列表就表明我们配置成功了,当然json有自己的格式我们可以通过字符串</p>
<font style="color:red;">前面分别讲了两种非注解的处理器映射器和处理器适配器。<br>下面讲解注解的映射器和适配器，这也是我们<strong>工作中使用的最多的方式</strong>。</font>

<h3 id="3-17-注解映射器和适配器"><a href="#3-17-注解映射器和适配器" class="headerlink" title="3.17 注解映射器和适配器"></a>3.17 注解映射器和适配器</h3>
        </div>
        <footer class="article-footer">
            
    <div class="jiathis_style">
    <span class="jiathis_txt">分享到：</span>
    <a class="jiathis_button_qzone">QQ空间</a>
    <a class="jiathis_button_tsina">新浪微博</a>
    <a class="jiathis_button_tqq">腾讯微博</a>
    <a class="jiathis_button_weixin">微信</a>
    <a href="http://www.jiathis.com/share" class="jiathis jiathis_txt jiathis_separator jtico jtico_jiathis" target="_blank">更多</a>
    <a class="jiathis_counter_style"></a>
</div>
<script type="text/javascript" src="http://v3.jiathis.com/code/jia.js" charset="utf-8"></script>
<style>
    .jiathis_style div:first-child:not(.jiadiv_01) {
        width: auto !important;
        border: none !important;
    }
    .jiathis_style .jiadiv_01 {
        margin: 10px 0;
        border-radius: 4px;
        border: #e1e1e1 solid 1px;
    }
    .jiathis_style .jiadiv_01 div:first-child {
        display: none;
    }
    .jiathis_style .jiadiv_02 {
        padding: 7px 0 !important;
    }
    .jiathis_style .jiadiv_02 .jiatitle {
        width: 85px;
        border: none;
        height: auto;
        margin: 3px 10px;
        padding: 6px 10px;
        border-radius: 4px;
    }
    .jiathis_style .jiadiv_02 .jiatitle:hover {
        border: none;
    }
    .jiathis_style .jiadiv_02 .jiatitle:nth-child(even) {
        margin-left: 0;
    }
    .jiathis_style .jtico:hover {
        opacity: 1;
    }
    .jiathis_style .ckepopBottom,
    .jiathis_style .centerBottom {
        width: auto !important;
        padding: 5px;
        background: #f7f7f7;
    }
</style>




        </footer>
    </div>
</article>

    <section id="comments">
    
        
    <div id="SOHUCS" sid="http://coder0007.com/2017/12/14/springMVC基础学习/"></div>


    
    </section>


                        </div>
                    </section>
                    <aside id="sidebar">
    <a class="sidebar-toggle" title="Expand Sidebar"><i class="toggle icon"></i></a>
    <div class="sidebar-top">
        <p>关注我 :</p>
        <ul class="social-links">
            
                
                <li>
                    <a class="social-tooltip" title="github" href="https://coder0007.github.io" target="_blank">
                        <i class="icon fa fa-github"></i>
                    </a>
                </li>
                
            
        </ul>
    </div>
    
        
<nav id="article-nav">
    
        <a href="/2017/12/14/简历/" id="article-nav-newer" class="article-nav-link-wrap">
        <strong class="article-nav-caption">下一篇</strong>
        <p class="article-nav-title">
        
            我的简历
        
        </p>
        <i class="icon fa fa-chevron-right" id="icon-chevron-right"></i>
    </a>
    
    
        <a href="/2017/12/14/hexo-github搭建个人博客/" id="article-nav-older" class="article-nav-link-wrap">
        <strong class="article-nav-caption">上一篇</strong>
        <p class="article-nav-title">hexo+github搭建个人博客</p>
        <i class="icon fa fa-chevron-left" id="icon-chevron-left"></i>
        </a>
    
</nav>

    
    <div class="widgets-container">
        
            
                
    <div class="widget-wrap">
        <h3 class="widget-title">最新文章</h3>
        <div class="widget">
            <ul id="recent-post" class="">
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/12/20/太通安全企业关系情况/" class="thumbnail">
    
    
        <span style="background-image:url(https://note.youdao.com/yws/api/personal/file/D807AA55B8BA4E65B224465252E01648?method=download&amp;shareKey=d51665b4e4cd82190f3549cf690e3bf8)" alt="太通安全企业关系情况" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"></p>
                            <p class="item-title"><a href="/2017/12/20/太通安全企业关系情况/" class="title">太通安全企业关系情况</a></p>
                            <p class="item-date"><time datetime="2017-12-20T03:19:53.000Z" itemprop="datePublished">2017-12-20</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/12/15/mybatis逆向工程生成源码/" class="thumbnail">
    
    
        <span style="background-image:url(https://note.youdao.com/yws/api/personal/file/434A3B1D810A40F79D0831FDBD64C31B?method=download&amp;shareKey=4997893eebd13bf0f74b164d4bbe54f6)" alt="mybatis逆向工程生成源码" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/后端/">后端</a></p>
                            <p class="item-title"><a href="/2017/12/15/mybatis逆向工程生成源码/" class="title">mybatis逆向工程生成源码</a></p>
                            <p class="item-date"><time datetime="2017-12-15T07:38:12.000Z" itemprop="datePublished">2017-12-15</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/12/14/简历/" class="thumbnail">
    
    
        <span class="thumbnail-image thumbnail-none"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/简历/">简历</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/简历/我的简历/">我的简历</a></p>
                            <p class="item-title"><a href="/2017/12/14/简历/" class="title">我的简历</a></p>
                            <p class="item-date"><time datetime="2017-12-14T08:25:31.000Z" itemprop="datePublished">2017-12-14</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/12/14/springMVC基础学习/" class="thumbnail">
    
    
        <span style="background-image:url(https://note.youdao.com/yws/api/personal/file/660681A60D7E435191CFC6E6654F2A08?method=download&amp;shareKey=ac7d3a198f2ea12c9e5a760304123099)" alt="springMVC基础实战演练" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/后端/">后端</a></p>
                            <p class="item-title"><a href="/2017/12/14/springMVC基础学习/" class="title">springMVC基础实战演练</a></p>
                            <p class="item-date"><time datetime="2017-12-14T08:02:13.000Z" itemprop="datePublished">2017-12-14</time></p>
                        </div>
                    </li>
                
                    <li>
                        
                        <div class="item-thumbnail">
                            <a href="/2017/12/14/hexo-github搭建个人博客/" class="thumbnail">
    
    
        <span style="background-image:url(https://note.youdao.com/yws/api/personal/file/716D945C85C64CD798B10A9D56A243CA?method=download&amp;shareKey=6db957cc2b068d8d3da9cdcaf76dc09b)" alt="hexo+github搭建个人博客" class="thumbnail-image"></span>
    
    
</a>

                        </div>
                        
                        <div class="item-inner">
                            <p class="item-category"><a class="article-category-link" href="/categories/技术/">技术</a><i class="icon fa fa-angle-right"></i><a class="article-category-link" href="/categories/技术/前端/">前端</a></p>
                            <p class="item-title"><a href="/2017/12/14/hexo-github搭建个人博客/" class="title">hexo+github搭建个人博客</a></p>
                            <p class="item-date"><time datetime="2017-12-14T07:55:45.000Z" itemprop="datePublished">2017-12-14</time></p>
                        </div>
                    </li>
                
            </ul>
        </div>
    </div>

            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">分类</h3>
        <div class="widget">
            <ul class="category-list"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/">技术</a><span class="category-list-count">3</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/前端/">前端</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/前端/nodejs/">nodejs</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/前端/nodejs/hexo/">hexo</a><span class="category-list-count">1</span></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/后端/">后端</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/后端/java/">java</a><span class="category-list-count">2</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/技术/后端/java/mybatis/">mybatis</a><span class="category-list-count">1</span></li><li class="category-list-item"><a class="category-list-link" href="/categories/技术/后端/java/springmvc/">springmvc</a><span class="category-list-count">1</span></li></ul></li></ul></li></ul></li><li class="category-list-item"><a class="category-list-link" href="/categories/简历/">简历</a><span class="category-list-count">1</span><ul class="category-list-child"><li class="category-list-item"><a class="category-list-link" href="/categories/简历/我的简历/">我的简历</a><span class="category-list-count">1</span></li></ul></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">归档</h3>
        <div class="widget">
            <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2017/12/">十二月 2017</a><span class="archive-list-count">5</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">标签</h3>
        <div class="widget">
            <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/hexo/">hexo</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/java/">java</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/mybatis/">mybatis</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/springmvc/">springmvc</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/前端/">前端</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/博客/">博客</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/后端/">后端</a><span class="tag-list-count">3</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/简历/">简历</a><span class="tag-list-count">1</span></li></ul>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-float">
        <h3 class="widget-title">标签云</h3>
        <div class="widget tagcloud">
            <a href="/tags/hexo/" style="font-size: 10px;">hexo</a> <a href="/tags/java/" style="font-size: 15px;">java</a> <a href="/tags/mybatis/" style="font-size: 10px;">mybatis</a> <a href="/tags/springmvc/" style="font-size: 10px;">springmvc</a> <a href="/tags/前端/" style="font-size: 10px;">前端</a> <a href="/tags/博客/" style="font-size: 10px;">博客</a> <a href="/tags/后端/" style="font-size: 20px;">后端</a> <a href="/tags/简历/" style="font-size: 10px;">简历</a>
        </div>
    </div>


            
                
    <div class="widget-wrap widget-list">
        <h3 class="widget-title">链接</h3>
        <div class="widget">
            <ul>
                
                    <li>
                        <a href="http://coder0007.github.io">smallCoder</a>
                    </li>
                
            </ul>
        </div>
    </div>


            
        
    </div>
</aside>
                </div>
            </div>
        </div>
        <footer id="footer">
    <div class="container">
        <div class="container-inner">
            <a id="back-to-top" href="javascript:;"><i class="icon fa fa-angle-up"></i></a>
            <div class="credit">
                <h1 class="logo-wrap">
                    <a href="/" class="logo"></a>
                </h1>
                <p>&copy; 2018 苟鸿人</p>
                <p>Powered by <a href="//hexo.io/" target="_blank">Hexo</a>. Theme by <a href="//github.com/ppoffice" target="_blank">PPOffice</a></p>
            </div>
        </div>
    </div>
</footer>
        
    
    <script id="cy_cmt_num" src="https://changyan.sohu.com/upload/plugins/plugins.list.count.js?clientId=cytnYcXAJ"></script>
    <script type="text/javascript">
        (function() {
            var appid = 'cytnYcXAJ';
            var conf = '99eec114ba801c7e21cd7459b5df779f';
            var width = window.innerWidth || document.documentElement.clientWidth;
            if (width < 960) {
                window.document.write('<script id="changyan_mobile_js" charset="utf-8" type="text/javascript" src="https://changyan.sohu.com/upload/mobile/wap-js/changyan_mobile.js?client_id=' + appid + '&conf=' + conf + '"><\/script>');
            } else {
                var loadJs = function(d, a) {
                    var c = document.getElementsByTagName("head")[0] || document.head || document.documentElement;
                    var b = document.createElement("script");
                    b.setAttribute("type", "text/javascript");
                    b.setAttribute("charset", "UTF-8");
                    b.setAttribute("src", d);
                    if (typeof a === "function") {
                        if (window.attachEvent) {
                            b.onreadystatechange = function() {
                                var e = b.readyState;
                                if (e === "loaded" || e === "complete") {
                                    b.onreadystatechange = null;
                                    a()
                                }
                            }
                        } else {
                            b.onload = a
                        }
                    }
                    c.appendChild(b)
                };
                loadJs("https://changyan.sohu.com/upload/changyan.js", function() {
                    window.changyan.api.config({
                        appid: appid,
                        conf: conf
                    })
                });
            }
        })();
    </script>





    
        <script src="/libs/lightgallery/js/lightgallery.min.js"></script>
        <script src="/libs/lightgallery/js/lg-thumbnail.min.js"></script>
        <script src="/libs/lightgallery/js/lg-pager.min.js"></script>
        <script src="/libs/lightgallery/js/lg-autoplay.min.js"></script>
        <script src="/libs/lightgallery/js/lg-fullscreen.min.js"></script>
        <script src="/libs/lightgallery/js/lg-zoom.min.js"></script>
        <script src="/libs/lightgallery/js/lg-hash.min.js"></script>
        <script src="/libs/lightgallery/js/lg-share.min.js"></script>
        <script src="/libs/lightgallery/js/lg-video.min.js"></script>
    
    
        <script src="/libs/justified-gallery/jquery.justifiedGallery.min.js"></script>
    
    



<!-- Custom Scripts -->
<script src="/js/main.js"></script>

    </div>
</body>
</html>
